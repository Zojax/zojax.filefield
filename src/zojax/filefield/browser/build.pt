<div class="z-topframe"
     tal:define="batch view/batch">
  <div class="z-page-description"
       tal:content="view/label"></div>

  <form action="build_all" method="post">
    <p><b>Attention!</b> This operation is very resource-intensive.</p>
    <table class="z-table">
      <thead>
        <tr>
          <th></th>
          <th>File</th>
        </tr>
      </thead>

      <tal:block tal:repeat="record batch">
        <!-- condition for empty object -->
        <tr tal:define="info python:view.getInfo(record)"
            tal:attributes="class python:repeat['record'].odd() and 'even' or 'odd'">
          <td>
            <input type="checkbox" name="form.checkbox.id:list"
                   tal:attributes="value info/id"/>
          </td>
          <td tal:content="info/name"></td>
        </tr>
      </tal:block>
    </table>
    <div class="z-form-controls">
      <hr />
      <input type="submit" class="z-form-standalonebtn" i18n:attributes="value"
             name="form.button.build_selected" value="Build Selected Previews" />
      <input type="submit" class="z-form-standalonebtn" i18n:attributes="value"
             name="form.button.build" value="Build Previews" />
    </div>
  </form>
</div>
